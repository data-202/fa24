{
  "hash": "a544b06c1e41e6afc1816930f8c94639",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"General Social Survey (GSS) data\"\nauthor: \"Nathan Alexander\"\noutput: html_document\n---\n\n\n\n\nThe package `gssr` is located [here](https://kjhealy.github.io/gssr/).\n\nWe will run through a sample analysis using the `gssr` package.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install packages\ninstall.packages(\"remotes\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"tidyverse\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"tidyr\", repos = \"http://cran.us.r-project.org\")\n\n# Install 'gssr' from 'ropensci' universe\ninstall.packages('gssr', repos =\n  c('https://kjhealy.r-universe.dev', 'https://cloud.r-project.org'))\n\n# Also recommended: install 'gssrdoc' as well\ninstall.packages('gssrdoc', repos =\n  c('https://kjhealy.r-universe.dev', 'https://cloud.r-project.org'))\n\n# load libraries\nlibrary(gssr)\nlibrary(dplyr)\nlibrary(tidyr)\n```\n:::\n\n\n\n\n---\n\n#### Explore variables in the GSSR documentation file\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load the master documentation files\ndata(gss_all) # note that this is a large file of all GSS data\ndata(gssrdoc) # this is the documentation for the GSS data\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in data(gssrdoc): data set 'gssrdoc' not found\n```\n\n\n:::\n:::\n\n\n\n\n---\n\n#### Examine the years available for any given variable\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# check which years your variables are available\ngss_which_years(gss_all, race)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 2\n   year      race \n   <dbl+lbl> <lgl>\n 1 1972      TRUE \n 2 1973      TRUE \n 3 1974      TRUE \n 4 1975      TRUE \n 5 1976      TRUE \n 6 1977      TRUE \n 7 1978      TRUE \n 8 1980      TRUE \n 9 1982      TRUE \n10 1983      TRUE \n# ℹ 24 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, sex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 2\n   year      sex  \n   <dbl+lbl> <lgl>\n 1 1972      TRUE \n 2 1973      TRUE \n 3 1974      TRUE \n 4 1975      TRUE \n 5 1976      TRUE \n 6 1977      TRUE \n 7 1978      TRUE \n 8 1980      TRUE \n 9 1982      TRUE \n10 1983      TRUE \n# ℹ 24 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, hrs2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 2\n   year      hrs2 \n   <dbl+lbl> <lgl>\n 1 1972      FALSE\n 2 1973      TRUE \n 3 1974      TRUE \n 4 1975      TRUE \n 5 1976      TRUE \n 6 1977      TRUE \n 7 1978      TRUE \n 8 1980      TRUE \n 9 1982      TRUE \n10 1983      TRUE \n# ℹ 24 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 2\n   year      educ \n   <dbl+lbl> <lgl>\n 1 1972      TRUE \n 2 1973      TRUE \n 3 1974      TRUE \n 4 1975      TRUE \n 5 1976      TRUE \n 6 1977      TRUE \n 7 1978      TRUE \n 8 1980      TRUE \n 9 1982      TRUE \n10 1983      TRUE \n# ℹ 24 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\n# when you want to return information for multiple variables\ngss_all %>%\n  gss_which_years(c(race, sex, hrs2, educ)) %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 5\n   year      race  sex   hrs2  educ \n   <dbl+lbl> <lgl> <lgl> <lgl> <lgl>\n 1 1972      TRUE  TRUE  FALSE TRUE \n 2 1973      TRUE  TRUE  TRUE  TRUE \n 3 1974      TRUE  TRUE  TRUE  TRUE \n 4 1975      TRUE  TRUE  TRUE  TRUE \n 5 1976      TRUE  TRUE  TRUE  TRUE \n 6 1977      TRUE  TRUE  TRUE  TRUE \n 7 1978      TRUE  TRUE  TRUE  TRUE \n 8 1980      TRUE  TRUE  TRUE  TRUE \n 9 1982      TRUE  TRUE  TRUE  TRUE \n10 1983      TRUE  TRUE  TRUE  TRUE \n11 1984      TRUE  TRUE  TRUE  TRUE \n12 1985      TRUE  TRUE  TRUE  TRUE \n13 1986      TRUE  TRUE  TRUE  TRUE \n14 1987      TRUE  TRUE  TRUE  TRUE \n15 1988      TRUE  TRUE  TRUE  TRUE \n16 1989      TRUE  TRUE  TRUE  TRUE \n17 1990      TRUE  TRUE  TRUE  TRUE \n18 1991      TRUE  TRUE  TRUE  TRUE \n19 1993      TRUE  TRUE  TRUE  TRUE \n20 1994      TRUE  TRUE  TRUE  TRUE \n21 1996      TRUE  TRUE  TRUE  TRUE \n22 1998      TRUE  TRUE  TRUE  TRUE \n23 2000      TRUE  TRUE  TRUE  TRUE \n24 2002      TRUE  TRUE  TRUE  TRUE \n25 2004      TRUE  TRUE  TRUE  TRUE \n26 2006      TRUE  TRUE  TRUE  TRUE \n27 2008      TRUE  TRUE  TRUE  TRUE \n28 2010      TRUE  TRUE  TRUE  TRUE \n29 2012      TRUE  TRUE  TRUE  TRUE \n30 2014      TRUE  TRUE  TRUE  TRUE \n31 2016      TRUE  TRUE  TRUE  TRUE \n32 2018      TRUE  TRUE  TRUE  TRUE \n33 2021      TRUE  TRUE  TRUE  TRUE \n34 2022      TRUE  TRUE  TRUE  TRUE \n```\n\n\n:::\n:::\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# loading single year data\ngss12 <- gss_get_yr(2012)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nFetching: https://gss.norc.org/documents/stata/2012_stata.zip\n```\n\n\n:::\n\n```{.r .cell-code}\ngss22 <- gss_get_yr(2022)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nFetching: https://gss.norc.org/documents/stata/2022_stata.zip\n```\n\n\n:::\n\n```{.r .cell-code}\n# View(gss22)\n```\n:::\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# select your variables for a single year using cross sectional file\ngss12 %>% \n  select(race, sex, hrs2, educ, wtssall)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,974 × 5\n   race      sex        hrs2        educ                    wtssall  \n   <dbl+lbl> <dbl+lbl>  <dbl+lbl>   <dbl+lbl>               <dbl+lbl>\n 1 1 [white] 1 [male]   NA(i) [iap] 16 [4 years of college] 2.62     \n 2 1 [white] 1 [male]   NA(i) [iap] 12 [12th grade]         3.50     \n 3 3 [other] 1 [male]   NA(i) [iap] 12 [12th grade]         1.75     \n 4 1 [white] 2 [female] NA(i) [iap] 13 [1 year of college]  1.24     \n 5 2 [black] 2 [female] NA(i) [iap] 16 [4 years of college] 0.874    \n 6 1 [white] 2 [female] NA(i) [iap] 19 [7 years of college] 0.824    \n 7 1 [white] 2 [female] NA(i) [iap] 15 [3 years of college] 0.824    \n 8 3 [other] 2 [female] NA(i) [iap] 11 [11th grade]         0.412    \n 9 2 [black] 2 [female] NA(i) [iap]  9 [9th grade]          0.412    \n10 1 [white] 2 [female] NA(i) [iap] 17 [5 years of college] 0.412    \n# ℹ 1,964 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ngss12 %>% \n  select(race, sex, hrs2, educ, wtssall) %>% \n  count(race, sex, wtssall)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 66 × 4\n   race      sex       wtssall       n\n   <dbl+lbl> <dbl+lbl> <dbl+lbl> <int>\n 1 1 [white] 1 [male]  0.412       167\n 2 1 [white] 1 [male]  0.824       280\n 3 1 [white] 1 [male]  0.874        34\n 4 1 [white] 1 [male]  1.00          1\n 5 1 [white] 1 [male]  1.19          1\n 6 1 [white] 1 [male]  1.24         46\n 7 1 [white] 1 [male]  1.65         22\n 8 1 [white] 1 [male]  1.75         95\n 9 1 [white] 1 [male]  2.06          7\n10 1 [white] 1 [male]  2.62         11\n# ℹ 56 more rows\n```\n\n\n:::\n:::\n\n\n\n\n---\n\n# Get data via `gss_all` data set\n\nWe can use a more direct method but we must be careful about our outputs.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngss_all %>% \n  select(year, race, sex, hrs2, educ, wtssall, wtss, wtssnr) %>% \n  filter(year == 2014) %>% \n  drop_na() -> df\n\nsapply(df, function(x) sum(is.na(x))) # take note that the hrs2 variable will cause issue\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   year    race     sex    hrs2    educ wtssall    wtss  wtssnr \n      0       0       0       0       0       0       0       0 \n```\n\n\n:::\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 8\n   year      race      sex        hrs2      educ      wtssall   wtss      wtssnr\n   <dbl+lbl> <dbl+lbl> <dbl+lbl>  <dbl+lbl> <dbl+lbl> <dbl+lbl> <dbl+lbl> <dbl+>\n 1 2014      1 [white] 2 [female] 40        16        0.448     0.448     0.500 \n 2 2014      2 [black] 2 [female] 50        14        1.38      1.38      1.54  \n 3 2014      3 [other] 2 [female] 50        13        0.448     0.448     0.500 \n 4 2014      2 [black] 2 [female] 45        18        0.690     0.690     0.770 \n 5 2014      1 [white] 2 [female] 45        17        0.896     0.896     1.00  \n 6 2014      2 [black] 2 [female] 32        12        0.690     0.690     0.735 \n 7 2014      3 [other] 2 [female] 40        12        2.07      2.07      2.21  \n 8 2014      1 [white] 2 [female] 15        12        0.896     0.896     0.954 \n 9 2014      1 [white] 2 [female] 60        20        0.896     0.896     0.888 \n10 2014      1 [white] 1 [male]   40        16        0.896     0.896     0.923 \n# ℹ 30 more rows\n```\n\n\n:::\n:::\n\n\n\n\n---\n\n# Model 1\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# select your variables for a single year using gss_all\ngss_all %>% \n  filter(year == 2012) %>% \n  select(race, sex, hrs2, educ, wtssall, wtss, wtssnr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,974 × 7\n   race      sex        hrs2        educ      wtssall   wtss      wtssnr   \n   <dbl+lbl> <dbl+lbl>  <dbl+lbl>   <dbl+lbl> <dbl+lbl> <dbl+lbl> <dbl+lbl>\n 1 1 [white] 1 [male]   NA(i) [iap] 16        2.62      2.62      2.87     \n 2 1 [white] 1 [male]   NA(i) [iap] 12        3.50      3.50      3.83     \n 3 3 [other] 1 [male]   NA(i) [iap] 12        1.75      1.75      1.91     \n 4 1 [white] 2 [female] NA(i) [iap] 13        1.24      1.24      1.35     \n 5 2 [black] 2 [female] NA(i) [iap] 16        0.874     0.874     0.957    \n 6 1 [white] 2 [female] NA(i) [iap] 19        0.824     0.824     0.902    \n 7 1 [white] 2 [female] NA(i) [iap] 15        0.824     0.824     0.902    \n 8 3 [other] 2 [female] NA(i) [iap] 11        0.412     0.412     0.451    \n 9 2 [black] 2 [female] NA(i) [iap]  9        0.412     0.412     0.451    \n10 1 [white] 2 [female] NA(i) [iap] 17        0.412     0.412     0.451    \n# ℹ 1,964 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ngss_all %>% \n  filter(year == 2018) %>% \n  select(race, sex, hrs2, educ, wtssall, wtss, wtssnr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2,348 × 7\n   race      sex        hrs2        educ      wtssall   wtss      wtssnr   \n   <dbl+lbl> <dbl+lbl>  <dbl+lbl>   <dbl+lbl> <dbl+lbl> <dbl+lbl> <dbl+lbl>\n 1 1 [white] 1 [male]      41       14        2.36      2.36      2.75     \n 2 1 [white] 2 [female] NA(i) [iap] 10        0.943     0.943     1.10     \n 3 1 [white] 1 [male]   NA(i) [iap] 16        0.943     0.943     1.10     \n 4 1 [white] 2 [female] NA(i) [iap] 16        0.943     0.943     1.10     \n 5 2 [black] 1 [male]   NA(i) [iap] 18        0.943     0.943     1.10     \n 6 1 [white] 2 [female] NA(i) [iap] 16        0.943     0.943     1.10     \n 7 2 [black] 2 [female] NA(i) [iap] 13        0.943     0.943     1.10     \n 8 1 [white] 1 [male]   NA(i) [iap] 12        0.471     0.471     0.551    \n 9 1 [white] 2 [female] NA(i) [iap]  8        0.471     0.471     0.551    \n10 1 [white] 1 [male]   NA(i) [iap] 12        0.943     0.943     1.10     \n# ℹ 2,338 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n#### Cleaning data\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# clean data for analysis\ngss12 %>% \n  select(race, sex, hrs2, educ, wtssall, wtss, wtssnr) %>% \n  drop_na() -> gss12_analysis\n```\n:::\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# check for missing values\nsapply(gss12_analysis, function(x) sum(is.na(x)))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   race     sex    hrs2    educ wtssall    wtss  wtssnr \n      0       0       0       0       0       0       0 \n```\n\n\n:::\n\n```{.r .cell-code}\nstr(gss12_analysis)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [35 × 7] (S3: tbl_df/tbl/data.frame)\n $ race   : dbl+lbl [1:35] 2, 1, 3, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1...\n   ..@ label       : chr \"race of respondent\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:16] 1 2 3 NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:16] \"white\" \"black\" \"other\" \"don't know\" ...\n $ sex    : dbl+lbl [1:35] 2, 1, 1, 2, 1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 1, 1, 2, 2, 1...\n   ..@ label       : chr \"respondents sex\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:15] 1 2 NA NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:15] \"male\" \"female\" \"don't know\" \"iap\" ...\n $ hrs2   : dbl+lbl [1:35] 25, 40, 40, 50, 45, 45, 38, 32, 30, 40, 35, 35, 16, 35,...\n   ..@ label       : chr \"number of hours usually work a week\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:14] 89 NA NA NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:14] \"89+ hours\" \"don't know\" \"iap\" \"I don't have a job\" ...\n $ educ   : dbl+lbl [1:35] 16, 16, 12, 16, 12, 14, 14, 12, 14, 14,  9, 10, 14, 18,...\n   ..@ label       : chr \"highest year of school completed\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:34] 0 1 2 3 4 5 6 7 8 9 ...\n   .. ..- attr(*, \"names\")= chr [1:34] \"no formal schooling\" \"1st grade\" \"2nd grade\" \"3rd grade\" ...\n $ wtssall: dbl+lbl [1:35] 1.748, 0.824, 3.496, 0.874, 0.824, 0.874, 0.874, 0.412,...\n   ..@ label       : chr \"weight variable\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:13] NA NA NA NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:13] \"don't know\" \"iap\" \"I don't have a job\" \"dk, na, iap\" ...\n $ wtss   : dbl+lbl [1:35] 1.748, 0.824, 3.496, 0.874, 0.824, 0.874, 0.874, 0.412,...\n   ..@ label       : chr \"weight variable\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:13] NA NA NA NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:13] \"don't know\" \"iap\" \"I don't have a job\" \"dk, na, iap\" ...\n $ wtssnr : dbl+lbl [1:35] 1.761, 0.845, 3.740, 0.807, 0.887, 0.895, 1.110, 0.408,...\n   ..@ label       : chr \"weight variable\"\n   ..@ format.stata: chr \"%29.0g\"\n   ..@ labels      : Named num [1:13] NA NA NA NA NA NA NA NA NA NA ...\n   .. ..- attr(*, \"names\")= chr [1:13] \"don't know\" \"iap\" \"I don't have a job\" \"dk, na, iap\" ...\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# exploratory analysis\ngss12 %>% \n  select(race, sex, hrs2, educ, wtssall, wtss, wtssnr) %>% \n  count(race, sex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  race      sex            n\n  <dbl+lbl> <dbl+lbl>  <int>\n1 1 [white] 1 [male]     673\n2 1 [white] 2 [female]   804\n3 2 [black] 1 [male]     114\n4 2 [black] 2 [female]   187\n5 3 [other] 1 [male]      98\n6 3 [other] 2 [female]    98\n```\n\n\n:::\n\n```{.r .cell-code}\ngss12_analysis %>% \n  count(race, sex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 3\n  race      sex            n\n  <dbl+lbl> <dbl+lbl>  <int>\n1 1 [white] 1 [male]       9\n2 1 [white] 2 [female]    19\n3 2 [black] 2 [female]     5\n4 3 [other] 1 [male]       1\n5 3 [other] 2 [female]     1\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel <- lm(gss12_analysis$hrs2 ~ gss12_analysis$educ, weight = gss12_analysis$wtssall)\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = gss12_analysis$hrs2 ~ gss12_analysis$educ, weights = gss12_analysis$wtssall)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-21.953  -5.699   1.695   5.578  17.203 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)    \n(Intercept)          41.8008     8.0522   5.191 1.05e-05 ***\ngss12_analysis$educ  -0.4010     0.6014  -0.667    0.509    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.01 on 33 degrees of freedom\nMultiple R-squared:  0.0133,\tAdjusted R-squared:  -0.0166 \nF-statistic: 0.4447 on 1 and 33 DF,  p-value: 0.5095\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n# Plot the variable relationships \n\nHere, I use some dated code, namely the base R abline() function discussed in class.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot the regression line\nplot(gss12_analysis$educ, gss12_analysis$hrs2)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Some alternate code\nplot(gss12_analysis$educ, gss12_analysis$hrs2, \n     main=\"Education vs Hours Worked\",\n     xlab=\"Years of Education\", \n     ylab=\"Hours Worked\")\n\n# Add the regression line\nabline(lm(hrs2 ~ educ, data = gss12_analysis), col = \"red\")\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-12-2.png){width=672}\n:::\n:::\n\n\n\n\n---\n\nHere, I use some more frequent code with additional parameters given that we've made a ggplot object. The code also provides some labels to our plot.\n\n# Plot the variable relationships \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a basic scatter plot\nplot(gss12_analysis$educ, gss12_analysis$hrs2, \n     main=\"Education vs Hours Worked\",\n     xlab=\"Years of Education\", \n     ylab=\"Hours Worked\",\n     pch=16,  # Use filled circles for points\n     col=\"blue\",  # Make the points blue\n     cex=0.8)  # Slightly smaller point size\n\n# Add the regression line\nabline(model, col = \"red\", lwd = 2)\n\n# Add a legend\nlegend(\"topleft\", legend=c(\"Data points\", \"Regression line\"),\n       col=c(\"blue\", \"red\"), pch=c(16, NA), lty=c(NA, 1))\n\n# Add text for R-squared value\nr_squared <- summary(model)$r.squared\ntext(x = max(gss12_analysis$educ), y = min(gss12_analysis$hrs2), \n     labels = paste(\"R-squared =\", round(r_squared, 3)), \n     pos = 2)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\n---\n\n# Examine residuals\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check residuals\nresids <- residuals(model)\nplot(gss12_analysis$hrs2, resids)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Diagnostic plots\npar(mfrow=c(2,2))\nplot(model)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check significance of predictor\nanova(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalysis of Variance Table\n\nResponse: gss12_analysis$hrs2\n                    Df Sum Sq Mean Sq F value Pr(>F)\ngss12_analysis$educ  1   44.6  44.575  0.4447 0.5095\nResiduals           33 3307.8 100.236               \n```\n\n\n:::\n:::\n\n\n\n\n---\n\n# Model 2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# run your model and diagnostic plots\nmodel2 <- lm(df$educ ~ df$hrs2)\nsummary(model2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = df$educ ~ df$hrs2)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-6.2179 -2.8213 -0.1369  1.7238  5.1510 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 14.11117    1.68095   8.395 3.48e-10 ***\ndf$hrs2      0.01845    0.04141   0.445    0.659    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.211 on 38 degrees of freedom\nMultiple R-squared:  0.005195,\tAdjusted R-squared:  -0.02098 \nF-statistic: 0.1984 on 1 and 38 DF,  p-value: 0.6585\n```\n\n\n:::\n\n```{.r .cell-code}\npred <- predict(model2) \n\n# Plot the scatterplot\nplot(df$educ, df$hrs2)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Check residuals\nresids2 <- residuals(model2)\nplot(df$educ, resids2)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-17-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# Diagnostic plots\npar(mfrow=c(2,2))\nplot(model2)\n```\n\n::: {.cell-output-display}\n![](gssr_files/figure-html/unnamed-chunk-17-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# Check significance of predictor\nanova(model2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalysis of Variance Table\n\nResponse: df$educ\n          Df Sum Sq Mean Sq F value Pr(>F)\ndf$hrs2    1   2.05  2.0456  0.1984 0.6585\nResiduals 38 391.73 10.3087               \n```\n\n\n:::\n:::\n\n\n\n\n---\n\n# Preview of multivariate analysis\n\nTry to examine the assumptions of the multivariate analysis and model below.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## conducting a multivariate linear analysis\nmlm1 <- lm(cbind(hrs2, educ) ~ race + sex, data = df, weight = wtssall)\nsummary(mlm1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nResponse hrs2 :\n\nCall:\nlm(formula = hrs2 ~ race + sex, data = df, weights = wtssall)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-25.903  -5.609   2.901   7.820  26.521 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 48.37616    7.68946   6.291 2.54e-07 ***\nrace        -0.01122    3.47654  -0.003    0.997    \nsex         -6.38269    4.44618  -1.436    0.160    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 12.62 on 37 degrees of freedom\nMultiple R-squared:  0.05918,\tAdjusted R-squared:  0.008322 \nF-statistic: 1.164 on 2 and 37 DF,  p-value: 0.3235\n\n\nResponse educ :\n\nCall:\nlm(formula = educ ~ race + sex, data = df, weights = wtssall)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-5.4129 -2.5731  0.0395  1.4778  5.1925 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  15.6865     1.8605   8.431 3.87e-10 ***\nrace         -2.2122     0.8412  -2.630   0.0124 *  \nsex           1.2441     1.0758   1.156   0.2549    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.054 on 37 degrees of freedom\nMultiple R-squared:  0.1591,\tAdjusted R-squared:  0.1136 \nF-statistic:   3.5 on 2 and 37 DF,  p-value: 0.04054\n```\n\n\n:::\n:::\n",
    "supporting": [
      "gssr_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}